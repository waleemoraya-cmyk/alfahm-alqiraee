<div class="topbar" style="text-align:center; padding:12px 10px; color:#eaf2ff; font-size:14px;">
  ุฅุนุฏุงุฏ ุงููุนูู: ูููุฏ ูุฑูุน
</div>

<div class="box" style="max-width:720px; margin:0 auto; background:#fff; color:#222; padding:22px; border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,.15);">
  <h1 style="margin:0 0 6px; color:#1e40af;">๐ ููุตุฉ ุงูููู ุงููุฑุงุฆู</h1>
  <p style="margin:0 0 14px; color:#334155;">ุงูุชุจ ุงุณูู ุซู ุงุจุฏุฃ ุงูุชุญุฏู ๐</p>

  <!-- ุฅุฏุฎุงู ุงูุงุณู -->
  <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:center; margin:10px 0 18px;">
    <input id="studentName" type="text" placeholder="ุงูุชุจ ุงุณูู ููุง..."
      style="padding:12px 12px; border:1px solid #cbd5e1; border-radius:10px; min-width:240px; font-size:16px; outline:none;">
    <button id="startBtn"
      style="padding:12px 14px; border:none; border-radius:10px; background:#2563eb; color:#fff; font-size:16px; cursor:pointer;">
      โ ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ
    </button>
  </div>

  <!-- ููุทูุฉ ุงูุชุญุฏู -->
  <div id="quizArea" style="display:none;">
    <p style="margin:0 0 8px; color:#0f172a;">ุงูุฑุฃ ุงูุฌููุฉ ุงูุชุงููุฉ ุซู ุงุฎุชุฑ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ:</p>
    <div id="questionBox" style="background:#f1f5f9; padding:14px; border-radius:12px; margin-bottom:12px;">
      <div id="sentence" style="font-size:18px; margin-bottom:8px;"></div>
      <div id="question" style="color:#334155;"></div>
    </div>

    <div id="choices" style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap;"></div>

    <div style="margin-top:14px; display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;">
      <div id="progress" style="color:#334155;">ุงูุณุคุงู 1 / 1</div>
      <div id="result" style="font-weight:bold;"></div>
    </div>
  </div>

  <!-- ุณุฌู ุงูุงุฎุชุจุงุฑุงุช (ูุธูุฑ ูู ุฃูู ุชุนุฑู ูู ุงุฎุชุจุฑ ุนูู ููุณ ุงูุฌูุงุฒ) -->
  <hr style="margin:18px 0; border:none; border-top:1px solid #e2e8f0;">
  <h3 style="margin:0 0 8px; color:#0f172a;">๐ ุณุฌู ูู ุงุฎุชุจุฑ (ุนูู ูุฐุง ุงูุฌูุงุฒ)</h3>
  <ul id="logList" style="margin:0; padding:0 18px; color:#334155;"></ul>
</div>

<script>
  // ๐ฅ ููุง ุงูุฃุณุฆูุฉ: ุฃุถู ููุง ุชุฑูุฏ
  const questions = [
    {
      sentence: "ูุฑุฃ ุฎุงูุฏ ุงููุตุฉ ุจุณุฑุนุฉ ูููู ุฃุญุฏุงุซูุง.",
      question: 'ูุง ูุนูู ูููุฉ "ุฃุญุฏุงุซูุง"ุ',
      choices: ["ููุงุฆุนูุง", "ุนูุงููููุง"],
      correctIndex: 0
    },
    {
      sentence: "ุนุงุฏ ุงูุทุงูุจ ุฅูู ุจูุชู ูุณุฑูุฑูุง ุจุนุฏ ุงูุชููู.",
      question: 'ูุง ูุนูู ูููุฉ "ูุณุฑูุฑูุง"ุ',
      choices: ["ุญุฒูููุง", "ูุฑุญูุง"],
      correctIndex: 1
    },
    {
      sentence: "ูุธููุช ุงููุฏุฑุณุฉ ุฑุญูุฉู ูููุฏุฉ ููุทูุงุจ.",
      question: 'ูุง ูุนูู ูููุฉ "ูุธููุช"ุ',
      choices: ["ุฑุชูุจุช", "ุฃูุณุฏุช"],
      correctIndex: 0
    }
  ];

  const nameInput = document.getElementById("studentName");
  const startBtn = document.getElementById("startBtn");
  const quizArea = document.getElementById("quizArea");
  const sentenceEl = document.getElementById("sentence");
  const questionEl = document.getElementById("question");
  const choicesEl = document.getElementById("choices");
  const progressEl = document.getElementById("progress");
  const resultEl = document.getElementById("result");
  const logList = document.getElementById("logList");

  let currentIndex = 0;
  let studentName = "";

  // ุณุฌู ูุญูู ุนูู ููุณ ุงูุฌูุงุฒ (localStorage)
  function loadLog() {
    const log = JSON.parse(localStorage.getItem("quiz_log") || "[]");
    logList.innerHTML = "";
    log.slice().reverse().forEach(item => {
      const li = document.createElement("li");
      li.textContent = `${item.name} โ ${item.time} โ ุงููุชูุฌุฉ: ${item.score}/${item.total}`;
      logList.appendChild(li);
    });
  }

  function saveLog(entry) {
    const log = JSON.parse(localStorage.getItem("quiz_log") || "[]");
    log.push(entry);
    localStorage.setItem("quiz_log", JSON.stringify(log));
    loadLog();
  }

  function renderQuestion() {
    const q = questions[currentIndex];
    sentenceEl.textContent = q.sentence;
    questionEl.textContent = q.question;
    progressEl.textContent = `ุงูุณุคุงู ${currentIndex + 1} / ${questions.length}`;
    resultEl.textContent = "";

    choicesEl.innerHTML = "";
    q.choices.forEach((choice, idx) => {
      const btn = document.createElement("button");
      btn.textContent = choice;
      btn.style.cssText = "padding:10px 14px; border:none; border-radius:10px; background:#2563eb; color:#fff; cursor:pointer; font-size:15px;";
      btn.onclick = () => handleAnswer(idx);
      choicesEl.appendChild(btn);
    });
  }

  let score = 0;

  function handleAnswer(selectedIndex) {
    const q = questions[currentIndex];
    if (selectedIndex === q.correctIndex) {
      resultEl.textContent = "โ ุฅุฌุงุจุฉ ุตุญูุญุฉ";
      resultEl.style.color = "#16a34a";
      score++;
    } else {
      resultEl.textContent = "โ ุฅุฌุงุจุฉ ุบูุฑ ุตุญูุญุฉ";
      resultEl.style.color = "#dc2626";
    }

    // ุงูุชูู ููุณุคุงู ุงูุชุงูู ุจุนุฏ ูุตู ุซุงููุฉ
    setTimeout(() => {
      currentIndex++;
      if (currentIndex < questions.length) {
        renderQuestion();
      } else {
        finishQuiz();
      }
    }, 600);
  }

  function finishQuiz() {
    choicesEl.innerHTML = "";
    sentenceEl.textContent = `ุงูุชูู ุงูุงุฎุชุจุงุฑ ูุง ${studentName} ๐`;
    questionEl.textContent = `ูุชูุฌุชู: ${score} / ${questions.length}`;
    resultEl.textContent = "";

    const now = new Date();
    const time = now.toLocaleString("ar-SA");
    saveLog({ name: studentName, time, score, total: questions.length });

    // ุฅุนุงุฏุฉ ุถุจุท
    currentIndex = 0;
    score = 0;
  }

  startBtn.onclick = () => {
    const val = nameInput.value.trim();
    if (!val) {
      alert("ุงูุชุจ ุงุณูู ุฃููุงู ๐");
      return;
    }
    studentName = val;
    quizArea.style.display = "block";
    renderQuestion();
  };

  loadLog();
</script>
